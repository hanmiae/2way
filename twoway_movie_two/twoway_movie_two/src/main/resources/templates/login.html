<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>2WAY CINEMA · 로그인</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/theme.css}">

    <style>
        .auth{max-width:1100px;margin:26px auto 0;padding:0 16px;}
        .hero{display:flex;align-items:flex-end;justify-content:space-between;gap:16px;flex-wrap:wrap;margin:14px 0 14px}
        .hero h1{margin:0;font-size:38px;letter-spacing:-.8px;font-weight:950}
        .hero .sub{color:rgba(244,245,255,.72);font-weight:700;margin-top:6px}

        .wrap{
          border-radius:28px;
          border:1px solid rgba(255,255,255,.10);
          background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.04));
          box-shadow: 0 28px 90px rgba(0,0,0,.55);
          backdrop-filter: blur(18px);
          overflow:hidden;
        }
        .grid{display:grid;grid-template-columns: .95fr 1.05fr;gap:16px;padding:22px;}
        @media (max-width: 992px){ .grid{grid-template-columns:1fr;} }

        .panel{
          background: rgba(255,255,255,.92);
          border:1px solid rgba(0,0,0,.08);
          border-radius:22px;
          padding:18px;
          color:#0b0b12;
          box-shadow: 0 12px 40px rgba(0,0,0,.10);
        }
        .panel h2{margin:0 0 8px;font-size:22px;font-weight:950;letter-spacing:-.3px}
        .hint{font-size:12px;color:rgba(0,0,0,.55);font-weight:800;margin-bottom:10px}

        .field{display:flex;flex-direction:column;gap:7px;margin-bottom:12px}
        .lab{font-size:12px;color:rgba(0,0,0,.62);font-weight:900}
        .inp{
          height:46px;border-radius:14px;border:1px solid rgba(0,0,0,.16);
          padding:0 14px;background:#fff;outline:none;font-weight:800;
        }
        .inp:focus{border-color:rgba(255,43,214,.55); box-shadow:0 0 0 4px rgba(255,43,214,.14)}

        .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
        .btnx{
          border:none;border-radius:14px;padding:12px 14px;font-weight:1000;cursor:pointer;
          display:inline-flex;align-items:center;justify-content:center;gap:10px;
          text-decoration:none;
        }
        .primary{
          color:#fff;
          background: linear-gradient(135deg, rgba(255,43,214,.92), rgba(124,92,255,.80));
          box-shadow: 0 18px 55px rgba(255,43,214,.22);
        }
        .ghost{
          background: rgba(0,0,0,.04);
          border:1px solid rgba(0,0,0,.10);
          color:#111;
        }

        .side{
          border-radius:22px;
          border:1px solid rgba(255,255,255,.10);
          background: rgba(255,255,255,.06);
          padding:16px;
          height:100%;
        }
        .side h3{margin:0 0 8px;font-size:15px;font-weight:950}
        .side p{margin:0;color:rgba(244,245,255,.70);line-height:1.55;font-weight:650}
        .mini{font-size:12px;color:rgba(244,245,255,.60);font-weight:700;margin-top:10px}

        .alertx{
          margin-top:10px;
          padding:10px 12px;
          border-radius:14px;
          border:1px solid rgba(255,59,48,.22);
          background: rgba(255,59,48,.10);
          color: rgba(244,245,255,.90);
          font-weight:800;
          font-size:13px;
        }

        /* ✅ (추가) 소셜 로그인 UI */
        .divider{
          display:flex;align-items:center;gap:12px;margin:14px 0 10px;
          color:rgba(0,0,0,.45);font-weight:900;font-size:12px;
        }
        .divider:before,.divider:after{
          content:"";flex:1;height:1px;background:rgba(0,0,0,.10);
        }

        .socials{display:flex;flex-direction:column;gap:10px;margin-top:8px}
        .social{
          width:100%;
          border-radius:14px;
          padding:12px 14px;
          font-weight:1000;
          border:1px solid rgba(0,0,0,.10);
          background:#fff;
          text-decoration:none;
          display:flex;align-items:center;justify-content:center;gap:10px;
        }
        .social.kakao{background:#FEE500;color:#111;border-color:rgba(0,0,0,.08)}
        .social.naver{background:#03C75A;color:#fff;border-color:rgba(0,0,0,.08)}
        .social:hover{filter:brightness(.98)}
    </style>
</head>

<body>
<div th:replace="~{fragments/header :: header}"></div>

<main class="auth">
    <div class="hero">
        <div>
            <h1>로그인</h1>
            <div class="sub">계정으로 로그인하여 프로젝트 기능을 체험하세요.</div>
        </div>
    </div>

    <section class="wrap">
        <div class="grid">

            <!-- LEFT: LOGIN FORM -->
            <div class="panel">
                <h2>계정 로그인</h2>
                <div class="hint">Spring Security formLogin 기준</div>

                <!-- ✅ 너의 SecurityConfiguration 기준: /loginprocess + userid/userpw -->
                <form th:action="@{/loginprocess}" method="post">
                    <div class="field">
                        <div class="lab">아이디</div>
                        <input class="inp" type="text" name="userid" placeholder="아이디 입력" required>
                    </div>

                    <div class="field">
                        <div class="lab">비밀번호</div>
                        <input class="inp" type="password" name="userpw" placeholder="비밀번호 입력" required>
                    </div>

                    <!-- ✅ 실패/로그아웃 메시지 -->
                    <div class="alertx" th:if="${param.error}">
                        아이디 또는 비밀번호가 올바르지 않습니다.
                    </div>

                    <div class="alertx"
                         style="border-color:rgba(52,199,89,.22);background:rgba(52,199,89,.10)"
                         th:if="${param.logout}">
                        로그아웃 되었습니다.
                    </div>

                    <div class="actions">
                        <button class="btnx primary" type="submit">로그인</button>
                        <a class="btnx ghost" th:href="@{/member_inputgo}">회원가입</a>
                        <a class="btnx ghost" th:href="@{/}">메인</a>
                    </div>
                </form>

                <!-- ✅ (추가) 카카오/네이버 소셜 로그인 -->
                <div class="divider">또는 소셜 로그인</div>

                <div class="socials">
                    <a class="social kakao" th:href="@{/oauth2/authorization/kakao}">
                        카카오로 로그인
                    </a>

                    <a class="social naver" th:href="@{/oauth2/authorization/naver}">
                        네이버로 로그인
                    </a>
                </div>
            </div>

            <!-- RIGHT: INFO -->
            <div class="side">
                <h3>데모 계정 가이드</h3>
                <p>
                    - 일반 회원: 회원가입 후 로그인<br>
                    - 관리자 화면: 권한이 <b>ROLE_ADMIN</b>인 계정만 접근
                </p>
                <div class="mini">
                    * 로그인 후 상단 메뉴에서 영화/문의/모빌리티 기능을 확인하세요.
                </div>
            </div>

        </div>
    </section>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
<!-- ✅ Bootstrap JS (dropdown 필수) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // 혹시 DOM 로딩 타이밍 문제 대비(거의 필요없지만 안전장치)
    document.addEventListener("DOMContentLoaded", () => {
      // dropdown은 bootstrap이 자동으로 data-bs-toggle을 읽음
    });
</script>

</body>
</html>
