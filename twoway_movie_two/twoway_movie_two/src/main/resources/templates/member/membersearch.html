<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>íšŒì›ì •ë³´ê²€ìƒ‰</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/theme.css}">

    <style>
        .glass{
          border-radius:24px;
          border:1px solid rgba(255,255,255,.10);
          background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
          box-shadow: 0 28px 90px rgba(0,0,0,.55);
          backdrop-filter: blur(18px);
          overflow:hidden;
        }
        .bar{
          display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
          padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.10)
        }
        .meta{color:rgba(244,245,255,.80);font-weight:900}
        .form-control,.form-select{border-radius:14px}
        .hint{color:rgba(244,245,255,.65);font-weight:800;font-size:12px;margin-top:6px}

        /* âœ… ê²€ìƒ‰ ë²„íŠ¼ì´ "ì•ˆ ë³´ì´ëŠ”" ë¬¸ì œ ê°•ì œ í•´ê²° */
        .btn-search-neon{
          position: relative;
          z-index: 50;                 /* í…Œì´ë¸”/ì¹´ë“œ ìœ„ë¡œ */
          display: inline-flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          width: 100%;
          border-radius: 14px;
          padding: 12px 14px;
          font-weight: 900;
          color: #fff !important;      /* ê¸€ì ê°•ì œ í°ìƒ‰ */
          border: 1px solid rgba(255,255,255,.18) !important;
          background: linear-gradient(135deg, rgba(255,43,214,.95), rgba(124,92,255,.88)) !important;
          box-shadow: 0 18px 55px rgba(255,43,214,.28);
        }
        .btn-search-neon:hover{
          transform: translateY(-1px);
          filter: brightness(1.05);
          box-shadow: 0 22px 65px rgba(255,43,214,.34);
        }

        /* í˜¹ì‹œë¼ë„ ê²¹ì¹˜ëŠ” í˜„ìƒ ë°©ì§€ */
        .table-responsive{ overflow: visible; }
    </style>
</head>

<body>
<div th:replace="~{layouts/top_public :: body}"></div>


<main class="container-xxl my-4">
    <div class="d-flex justify-content-between align-items-start flex-wrap gap-3 mb-3">
        <div>
            <h2 class="text-white fw-bold mb-1">íšŒì›ì •ë³´ê²€ìƒ‰</h2>
            <div class="text-white-50 fw-semibold">í‚¤ì›Œë“œë¡œ íšŒì›ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.</div>
        </div>
        <div class="d-flex gap-2">
            <a class="btn btn-outline-light" th:href="@{/member_outgo}">íšŒì›ëª©ë¡</a>
            <a class="btn btn-cinema" th:href="@{/}">ë©”ì¸</a>
        </div>
    </div>

    <section class="glass p-0">
        <div class="bar">
            <div class="meta">ê²€ìƒ‰ í‚¤/ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ í›„ ê²€ìƒ‰ì„ ëˆ„ë¥´ì„¸ìš”.</div>
            <div class="meta" style="opacity:.9"> </div>
        </div>

        <div class="p-4">
            <!-- âœ… GET ê²€ìƒ‰ -->
            <form th:action="@{/member_searchgo}" method="get">

                <!-- ì…ë ¥ ì˜ì—­ -->
                <div class="row g-3 align-items-end">
                    <div class="col-md-3">
                        <label class="form-label text-white-50 fw-bold">ê²€ìƒ‰ í‚¤</label>
                        <select class="form-select" name="mkey">
                            <option value="userid" th:selected="${mkey=='userid'}">ì•„ì´ë””</option>
                            <option value="username" th:selected="${mkey=='username'}">ì´ë¦„</option>
                        </select>
                        <div class="hint">* í˜„ì¬ëŠ” ì•„ì´ë””/ì´ë¦„ ê²€ìƒ‰ ì§€ì›</div>
                    </div>

                    <div class="col-md-7">
                        <label class="form-label text-white-50 fw-bold">ê²€ìƒ‰ì–´</label>
                        <input class="form-control"
                               name="mvalue"
                               th:value="${mvalue}"
                               placeholder="ì˜ˆ) lolo / í˜¸í˜¸"
                               autocomplete="off">
                        <div class="small text-white-50 mt-2">Enterë¡œë„ ê²€ìƒ‰ë©ë‹ˆë‹¤.</div>
                    </div>

                    <!-- âœ… ë²„íŠ¼ ì˜ì—­: ê²€ìƒ‰ì´ í™•ì‹¤íˆ ë³´ì´ê²Œ -->
                    <div class="col-md-2 d-grid gap-2">
                        <a class="btn btn-outline-light" th:href="@{/member_searchgo}" style="border-radius:14px;">
                            ì´ˆê¸°í™”
                        </a>

                        <button type="submit" class="btn-search-neon">
                            ğŸ” ê²€ìƒ‰
                        </button>
                    </div>
                </div>

                <hr class="border-light opacity-25 my-4"/>

                <!-- ê²°ê³¼/ë””ë²„ê·¸ -->
                <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-2">
                    <div class="text-white-50 fw-bold">
                        ê²€ìƒ‰ ê²°ê³¼: <span th:text="${list == null ? 0 : #lists.size(list)}">0</span>ê±´
                    </div>
                    <div class="small text-white-50">
                        debug) mkey=<b th:text="${mkey}">userid</b>,
                        mvalue=<b th:text="${mvalue}">lolo</b>,
                        size=<b th:text="${list == null ? 0 : #lists.size(list)}">0</b>
                    </div>
                </div>

                <!-- ê²°ê³¼ í…Œì´ë¸” -->
                <div class="table-responsive">
                    <table class="table table-dark table-hover align-middle mb-0">
                        <thead>
                        <tr>
                            <th style="width:220px">ì•„ì´ë””</th>
                            <th style="width:220px">ì´ë¦„</th>
                            <th style="width:160px">ê¶Œí•œ</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${list == null or #lists.isEmpty(list)}">
                            <td colspan="3" class="text-center text-white-50 py-4">
                                ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                            </td>
                        </tr>

                        <tr th:each="m : ${list}">
                            <td th:text="${m.userid}">lolo</td>
                            <td th:text="${m.username}">ë¡œë¡œ</td>
                            <td>
                <span class="badge rounded-pill"
                      th:classappend="${m.role == 'ROLE_ADMIN'} ? ' bg-danger' : ' bg-info'"
                      th:text="${m.role}">ROLE_USER</span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </form>
        </div>
    </section>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
