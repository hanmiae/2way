<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>2WAY CINEMA · 검색 결과</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/theme.css}">

    <style>
        .mv-wrap{max-width:1200px;margin:26px auto 70px;padding:0 16px;}
        .mv-hero{display:flex;align-items:flex-end;justify-content:space-between;gap:14px;flex-wrap:wrap;margin:10px 0 14px}
        .mv-hero h1{margin:0;font-size:34px;letter-spacing:-.6px;font-weight:950;color:#fff}
        .mv-hero .sub{color:rgba(244,245,255,.72);font-weight:700;margin-top:6px}

        .glass{
          border-radius:24px;border:1px solid rgba(255,255,255,.10);
          background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
          box-shadow: 0 28px 90px rgba(0,0,0,.55);
          backdrop-filter: blur(18px);overflow:hidden;
        }

        .btnx{border:none;border-radius:14px;padding:10px 12px;font-weight:1000;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:8px}
        .ghost{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);color:#fff}

        .grid{padding:16px;display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
        @media (max-width: 1200px){ .grid{grid-template-columns:repeat(3,1fr);} }
        @media (max-width: 860px){ .grid{grid-template-columns:repeat(2,1fr);} }
        @media (max-width: 520px){ .grid{grid-template-columns:1fr;} }

        .cardx{border-radius:20px;border:1px solid rgba(255,255,255,.10);background: rgba(0,0,0,.18);overflow:hidden}
        .poster{aspect-ratio:2/3;background:rgba(0,0,0,.35);overflow:hidden}
        .poster img{width:100%;height:100%;object-fit:cover;display:block}
        .body{padding:12px}
        .title{margin:0;font-weight:950;letter-spacing:-.3px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .sub2{margin-top:6px;color:rgba(244,245,255,.70);font-weight:700;font-size:12px}
        .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
        .chip{padding:6px 10px;border-radius:999px;font-weight:900;font-size:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.08);color:#fff}
        .chip2{border-color:rgba(0,229,255,.22);background:rgba(0,229,255,.10)}
        .chip3{border-color:rgba(255,43,214,.22);background:rgba(255,43,214,.10)}

        .empty{padding:26px;text-align:center;color:rgba(244,245,255,.75);font-weight:800}
    </style>
</head>

<body>
<div th:replace="~{layouts/top_public :: body}"></div>
<div th:replace="~{fragments/footer :: footer}"></div>

<main class="mv-wrap">

    <div class="mv-hero">
        <div>
            <h1>검색 결과</h1>
            <!-- ✅ list가 null이어도 0건 -->
            <div class="sub">
                총
                <b th:text="${list == null ? 0 : #lists.size(list)}">0</b>건
                <span th:if="${mkey != null and mvalue != null}"
                      style="margin-left:10px;opacity:.85">
          (키: <span th:text="${mkey}">mtitle</span>,
           값: <span th:text="${mvalue}">keyword</span>)
        </span>
            </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap">
            <a class="btnx ghost" th:href="@{/mv_searchgo}">다시 검색</a>
            <a class="btnx ghost" th:href="@{/mv_outgo}">목록</a>
        </div>
    </div>

    <section class="glass">

        <div th:if="${list == null or #lists.isEmpty(list)}" class="empty">
            검색 결과가 없습니다.
        </div>

        <div class="grid" th:if="${list != null and !#lists.isEmpty(list)}">
            <article class="cardx" th:each="m : ${list}">
                <a th:href="@{/detail(number=${m.mbunho})}" style="text-decoration:none;display:block">
                    <div class="poster">
                        <img th:src="@{'/upload/' + ${m.mimage}}" alt="poster">
                    </div>
                    <div class="body">
                        <h3 class="title" th:text="${m.mtitle}">TITLE</h3>
                        <div class="sub2">등록일: <span th:text="${m.mdate}">2026-01-15</span></div>

                        <div class="chips">
                            <span class="chip chip3" th:text="${m.mprice} + '원'">0원</span>
                            <span class="chip chip2">조회 <span th:text="${m.mreadcount}">0</span></span>
                            <span class="chip">#<span th:text="${m.mbunho}">0</span></span>
                        </div>
                    </div>
                </a>
            </article>
        </div>

    </section>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
